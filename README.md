crichq-ledrunner

For better (mainly worse) this file documents the attempts to make the generic led board at Kerava National Cricket Ground (Finland) display live scores extracted from CricHQ. This will hopefully branch out to another repo for bespoke small led displays (2 rows x 16 chars visible from 100m or so) facilitating a switch from manual scoreboards to inexpensive digital ones.

2017-08-24 Sitrep

Bureaucracy completed with CricHQ. First batch of MAR (MyActionReplay) kit sent and CricHQ API documentation received. Still waiting for the key, but the RESTful API seems like something we can extract all the necessary info from. On a personal note, everything still seems a bit foggy regarding the output to the led wall. Don't really know the resolution yet, but that should be clear by Sunday. The RasPi can surely be made to output 175x76 or equiv through its HDMI port, right? This diary will mainly be for the API exploration and led wall stuff, and I'll try to create another (mainly texty) one for the MAR installation -- just for posteriority. Technically I'm quite certain that the path for information delivery will be Match -> Scorer -> CricHQ device (iPad Mini @ KNCG) -> CricHQ DB -> Intelligent polling during matches by Python-requests (live data in suitable format or converted to be so) -> SDL2 output to HDMI -> display scaler unit (specs fortcoming, currently mirroring the top-left corner of a Win10 laptop running Notepad++ application fullscreen [applauds to whoever came up with that]) with four to five rows. The displayed information will be <runs/wickets> // <batsman 1> // <batsman 2> // Over <over.ball> // Target (or some other info). Now, as we're talking about the main score display at the KNCG, the delay between the match and the situation displayed on the led wall should be as low as possible. This is currently the great unknown, as we've only heard rumours of a rather sizeable latency (30secs+). This would be unacceptable for our 40-over Finnish Champsionship league, and even more so for our shorter formats. Still, it's hard to imagine that the company would intentionally delay API requests by that much, however frequent they may be. CricHQ's (old) tech blog boasts about stateless updates to their match database. That'd be nice in the context of accessing the API as well, but I think the intelligence cannot be inside the current API, as the client cannot advertise its current state in any way. Advetising could also be quite taxing on the CricHQ server. A low-overhead way would for CricHQ to gain statefulness towards API clients would probably be to attach a state-code to each match state. The API clients would then compare the state to the advertised state and only receive live updates if the state has changed. Without the state -- that is, currently -- the only way is to retrieve all the necessary match stats every second or so, resulting in 25 200 requests in a seven-hour league match of 40 overs. It's already quite clear that we'll try to liaise as closely as possible with the CricHQ dev personnel to get feedback and provide experiences.
